{"version":3,"file":"bim-engine-sdk.umd.js","sources":["../src/toolbar/index.ts","../src/modules/toolbar-manager.ts","../src/dialog/index.ts","../src/dialog/bimInfoDialog/index.ts","../src/modules/dialog-manager.ts","../src/bim-engine.ts","../src/toolbar/buttons/home/index.ts","../src/toolbar/buttons/location/index.ts","../src/toolbar/buttons/walk/walk-menu/index.ts","../src/toolbar/buttons/walk/walk-person/index.ts","../src/toolbar/buttons/walk/walk-bird/index.ts","../src/toolbar/buttons/setting/index.ts","../src/toolbar/buttons/info/index.ts"],"sourcesContent":["import './index.css';\nimport type {\n    OptButton,\n    ButtonGroup,\n    OptBtnGroupsOptions,\n    ButtonConfig,\n    ToolbarColors\n} from './index.type';\n\n/**\n * 底部操作按钮组组件\n * 负责渲染和管理底部工具栏的按钮、下拉菜单及相关交互。\n */\nexport class OptBtnGroups {\n    /** 挂载容器 */\n    private container: HTMLElement;\n    /** 组件配置选项 */\n    private options: OptBtnGroupsOptions;\n    /** 按钮组列表，按顺序存储 */\n    private groups: ButtonGroup[] = [];\n    /** 当前处于激活状态的按钮 ID 集合 */\n    private activeBtnIds: Set<string> = new Set();\n    /** 按钮 DOM 元素的引用映射，方便快速查找 */\n    private btnRefs: Map<string, HTMLElement> = new Map();\n    /** 当��显示的下拉菜单元素 */\n    private dropdownElement: HTMLElement | null = null;\n    /** 鼠标悬停计时器，用于处理菜单显示的防抖 */\n    private hoverTimeout: number | null = null;\n\n    /** 默认图标 SVG */\n    private readonly DEFAULT_ICON = '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect></svg>';\n\n    /**\n     * 构造函数\n     * @param options 配置选项\n     */\n    constructor(options: OptBtnGroupsOptions) {\n        const el = typeof options.container === 'string'\n            ? document.getElementById(options.container)\n            : options.container;\n\n        if (!el) throw new Error('Container not found');\n\n        this.container = el;\n        this.options = {\n            showLabel: true,\n            visibility: {},\n            ...options\n        };\n\n        this.initContainer();\n        this.applyStyles(); // 应用初始样式配置\n    }\n\n    /**\n     * 初始化容器\n     */\n    private initContainer(): void {\n        this.container.innerHTML = '';\n        this.container.classList.add('toolbar-root'); // 添加一个根类方便定位样式\n    }\n\n    /**\n     * 应用样式配置到 CSS 变量\n     */\n    private applyStyles(): void {\n        const style = this.container.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-toolbar-bg', this.options.backgroundColor);\n        if (this.options.btnBackgroundColor) style.setProperty('--bim-btn-bg', this.options.btnBackgroundColor);\n        if (this.options.btnHoverColor) style.setProperty('--bim-btn-hover-bg', this.options.btnHoverColor);\n        if (this.options.btnActiveColor) style.setProperty('--bim-btn-active-bg', this.options.btnActiveColor);\n        if (this.options.iconColor) style.setProperty('--bim-icon-color', this.options.iconColor);\n        if (this.options.iconActiveColor) style.setProperty('--bim-icon-active-color', this.options.iconActiveColor);\n        if (this.options.textColor) style.setProperty('--bim-btn-text-color', this.options.textColor);\n        if (this.options.textActiveColor) style.setProperty('--bim-btn-text-active-color', this.options.textActiveColor);\n    }\n\n    /**\n     * 更新颜色配置\n     * @param colors 颜色配置对象\n     */\n    public setColors(colors: ToolbarColors): void {\n        // 更新 options\n        this.options = { ...this.options, ...colors };\n        // 应用到 CSS 变量\n        this.applyStyles();\n    }\n\n    /**\n     * 添加按钮组\n     * @param groupId 组ID\n     * @param beforeGroupId 在哪个组之前插入（可选���，不传则插入到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string): void {\n        if (this.groups.some(g => g.id === groupId)) {\n            console.warn('Group ' + groupId + ' already exists');\n            return;\n        }\n\n        const newGroup: ButtonGroup = { id: groupId, buttons: [] };\n\n        if (beforeGroupId) {\n            const index = this.groups.findIndex(g => g.id === beforeGroupId);\n            if (index !== -1) {\n                this.groups.splice(index, 0, newGroup);\n            } else {\n                console.warn(`Target group ${beforeGroupId} not found, appending ${groupId} to end.`);\n                this.groups.push(newGroup);\n            }\n        } else {\n            this.groups.push(newGroup);\n        }\n    }\n\n    /**\n     * 添加按钮到指定组\n     * @param config 按钮配置（必须包含 groupId，可选包含 parentId）\n     */\n    public addButton(config: ButtonConfig): void {\n        const { groupId, parentId } = config;\n\n        if (!groupId) {\n            throw new Error(`Button ${config.id} config must contain 'groupId'`);\n        }\n\n        const group = this.groups.find(g => g.id === groupId);\n        if (!group) {\n            throw new Error(`Group ${groupId} not found. Please call addGroup first.`);\n        }\n\n        const button: OptButton = {\n            ...config,\n            children: config.children || []\n        };\n\n        if (parentId) {\n            // 添加为子按钮（菜单项）\n            const parentBtn = this.findButton(group.buttons, parentId);\n            if (!parentBtn) {\n                throw new Error(`Parent button ${parentId} not found in group ${groupId}`);\n            }\n            if (!parentBtn.children) {\n                parentBtn.children = [];\n            }\n            parentBtn.children.push(button);\n        } else {\n            // 添加为主按钮\n            group.buttons.push(button);\n        }\n    }\n\n    /**\n     * 递归查找按钮\n     */\n    private findButton(buttons: OptButton[], id: string): OptButton | undefined {\n        for (const btn of buttons) {\n            if (btn.id === id) return btn;\n            if (btn.children) {\n                const found = this.findButton(btn.children, id);\n                if (found) return found;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * 初始化组件，加载默认按钮配置\n     */\n    public async init(): Promise<void> {\n        // 动态导入默认按钮配置\n        const { homeButton } = await import('./buttons/home');\n        const { locationButton } = await import('./buttons/location');\n        const { walkMenuButton } = await import('./buttons/walk/walk-menu');\n        const { walkPersonButton } = await import('./buttons/walk/walk-person');\n        const { walkBirdButton } = await import('./buttons/walk/walk-bird');\n        const { settingButton } = await import('./buttons/setting');\n        const { infoButton } = await import('./buttons/info');\n\n        // 配置默认组和按钮\n        this.addGroup('group-1');\n        this.addButton(homeButton);\n        this.addButton(walkMenuButton);\n        this.addButton(walkPersonButton);\n        this.addButton(walkBirdButton);\n        this.addButton(locationButton);\n        this.addGroup('group-2');\n        this.addButton(settingButton);\n        this.addButton(infoButton);\n        this.render();\n    }\n\n    /**\n     * 渲染整个工具栏\n     */\n    public render(): void {\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'toolbar-container';\n\n        // 渲染所有组\n        this.groups.forEach((group, index) => {\n            const groupElement = this.renderGroup(group, index, this.groups.length);\n            wrapper.appendChild(groupElement);\n        });\n\n        this.container.appendChild(wrapper);\n    }\n\n    /**\n     * 渲染单个按钮组\n     */\n    private renderGroup(group: ButtonGroup, index: number, total: number): HTMLElement {\n        const groupEl = document.createElement('div');\n        groupEl.className = 'opt-btn-group';\n\n        if (index < total - 1) {\n            groupEl.classList.add('has-divider');\n        }\n\n        group.buttons.forEach(button => {\n            if (this.isVisible(button.id)) {\n                const btnWrapper = this.renderButton(button);\n                groupEl.appendChild(btnWrapper);\n            }\n        });\n\n        return groupEl;\n    }\n\n    /**\n     * 渲染单个按钮\n     */\n    private renderButton(button: OptButton): HTMLElement {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'opt-btn-wrapper';\n\n        const btnEl = document.createElement('div');\n        btnEl.className = 'opt-btn';\n\n        // 设置激活状态\n        if (this.activeBtnIds.has(button.id)) {\n            btnEl.classList.add('active');\n        }\n\n        if (button.disabled) {\n            btnEl.classList.add('disabled');\n        }\n\n        if (!this.options.showLabel) {\n            btnEl.classList.add('no-label');\n            if (button.label) {\n                btnEl.title = button.label;\n            }\n        }\n\n        // 渲染图标\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon';\n        icon.innerHTML = this.getIcon(button.icon);\n        btnEl.appendChild(icon);\n\n        // 渲染标签\n        if (this.options.showLabel && button.label) {\n            const label = document.createElement('span');\n            label.className = 'opt-btn-label';\n            label.textContent = button.label;\n            btnEl.appendChild(label);\n        }\n\n        // 如果有子菜单，渲染箭头\n        if (button.children && button.children.length > 0) {\n            const arrow = document.createElement('span');\n            arrow.className = 'opt-btn-arrow';\n            arrow.textContent = '▼';\n            btnEl.appendChild(arrow);\n        }\n\n        // 绑定事件\n        btnEl.addEventListener('click', () => this.handleClick(button));\n        btnEl.addEventListener('mouseenter', () => this.handleMouseEnter(button, btnEl));\n        btnEl.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        this.btnRefs.set(button.id, btnEl);\n\n        wrapper.appendChild(btnEl);\n        return wrapper;\n    }\n\n    /**\n     * 处理按钮点击事件\n     */\n    private handleClick(button: OptButton): void {\n        if (button.disabled) return;\n\n        // 如果没有子菜单，直接触发\n        if (!button.children || button.children.length === 0) {\n            if (button.keepActive) {\n                const wasActive = this.activeBtnIds.has(button.id);\n                if (wasActive) {\n                    this.activeBtnIds.delete(button.id);\n                } else {\n                    this.activeBtnIds.add(button.id);\n                }\n                this.updateButtonState(button.id);\n            }\n\n            this.closeDropdown();\n\n            if (button.onClick) {\n                button.onClick(button);\n            }\n        }\n    }\n\n    /**\n     * 处理子菜单项点击事件\n     */\n    private handleSubClick(button: OptButton): void {\n        if (button.keepActive) {\n            const wasActive = this.activeBtnIds.has(button.id);\n            if (wasActive) {\n                this.activeBtnIds.delete(button.id);\n            } else {\n                this.activeBtnIds.add(button.id);\n            }\n            this.updateButtonState(button.id);\n        }\n\n        this.closeDropdown();\n\n        if (button.onClick) {\n            button.onClick(button);\n        }\n    }\n\n    /**\n     * 处理鼠标移入事件（显示菜单）\n     */\n    private handleMouseEnter(button: OptButton, btnEl: HTMLElement): void {\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n            this.hoverTimeout = null;\n        }\n\n        if (button.children && button.children.length > 0) {\n            this.showDropdown(button, btnEl);\n\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.add('rotated');\n            }\n        } else {\n            this.closeDropdown();\n        }\n    }\n\n    /**\n     * 处理鼠标移出事件（隐藏菜单）\n     */\n    private handleMouseLeave(): void {\n        this.hoverTimeout = window.setTimeout(() => {\n            this.closeDropdown();\n        }, 200);\n    }\n\n    /**\n     * 显示下拉菜单\n     */\n    private showDropdown(button: OptButton, btnEl: HTMLElement): void {\n        this.closeDropdown();\n\n        if (!button.children) return;\n\n        const dropdown = document.createElement('div');\n        dropdown.className = 'opt-btn-dropdown';\n        \n        // 下拉菜单也应用当前的 CSS 变量样式，因为它们通常挂载在 body 上，所以需要单独设置或者确保能继承\n        // 简单起见，我们可以直接将容器上的 CSS 变量复制过来，或者设置内联样式\n        // 更好的是：如果我们在 this.container 上设置 CSS 变量，\n        // 而 dropdown 挂载在 body 上，它无法继承。\n        // 所以我们需要将 CSS 变量也应用到 dropdown 上。\n        \n        const style = dropdown.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-toolbar-bg', this.options.backgroundColor);\n        if (this.options.btnBackgroundColor) style.setProperty('--bim-btn-bg', this.options.btnBackgroundColor);\n        if (this.options.btnHoverColor) style.setProperty('--bim-btn-hover-bg', this.options.btnHoverColor);\n        if (this.options.btnActiveColor) style.setProperty('--bim-btn-active-bg', this.options.btnActiveColor);\n        if (this.options.iconColor) style.setProperty('--bim-icon-color', this.options.iconColor);\n        if (this.options.iconActiveColor) style.setProperty('--bim-icon-active-color', this.options.iconActiveColor);\n        if (this.options.textColor) style.setProperty('--bim-btn-text-color', this.options.textColor);\n        if (this.options.textActiveColor) style.setProperty('--bim-btn-text-active-color', this.options.textActiveColor);\n\n        const rect = btnEl.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n\n        dropdown.style.top = rect.top - 8 + 'px';\n        dropdown.style.left = centerX + 'px';\n\n        button.children.forEach(subBtn => {\n            if (this.isVisible(subBtn.id)) {\n                const item = this.renderDropdownItem(subBtn);\n                dropdown.appendChild(item);\n            }\n        });\n\n        // 保持菜单显���\n        dropdown.addEventListener('mouseenter', () => {\n            if (this.hoverTimeout) {\n                clearTimeout(this.hoverTimeout);\n                this.hoverTimeout = null;\n            }\n        });\n\n        dropdown.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        document.body.appendChild(dropdown);\n        this.dropdownElement = dropdown;\n    }\n\n    /**\n     * 渲染下拉菜单项\n     */\n    private renderDropdownItem(button: OptButton): HTMLElement {\n        const item = document.createElement('div');\n        item.className = 'opt-btn-dropdown-item';\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon small';\n        icon.innerHTML = this.getIcon(button.icon);\n        item.appendChild(icon);\n\n        if (this.options.showLabel) {\n            const label = document.createElement('span');\n            label.textContent = button.label;\n            item.appendChild(label);\n        }\n\n        item.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.handleSubClick(button);\n        });\n\n        return item;\n    }\n\n    /**\n     * 关闭所有下拉菜单\n     */\n    private closeDropdown(): void {\n        if (this.dropdownElement) {\n            this.dropdownElement.remove();\n            this.dropdownElement = null;\n        }\n\n        this.btnRefs.forEach(btnEl => {\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.remove('rotated');\n            }\n        });\n    }\n\n    /**\n     * 更新按钮的激活状态样式\n     */\n    private updateButtonState(buttonId: string): void {\n        const btnEl = this.btnRefs.get(buttonId);\n        if (btnEl) {\n            if (this.activeBtnIds.has(buttonId)) {\n                btnEl.classList.add('active');\n            } else {\n                btnEl.classList.remove('active');\n            }\n        }\n    }\n\n    /**\n     * 获取图标 SVG 字符串\n     */\n    private getIcon(icon?: string): string {\n        return icon || this.DEFAULT_ICON;\n    }\n\n    /**\n     * 更新按钮可见性\n     * @param buttonId 按钮ID\n     * @param visible 是否可见\n     */\n    public updateButtonVisibility(buttonId: string, visible: boolean): void {\n        if (!this.options.visibility) {\n            this.options.visibility = {};\n        }\n        this.options.visibility[buttonId] = visible;\n        this.render();\n    }\n\n    /**\n     * 设置是否显示标签\n     * @param show 是否显示\n     */\n    public setShowLabel(show: boolean): void {\n        this.options.showLabel = show;\n        this.render();\n    }\n\n    /**\n     * 设置背景颜色 (兼容旧接口)\n     * @param color CSS 颜色值\n     */\n    public setBackgroundColor(color: string): void {\n        this.setColors({ backgroundColor: color });\n    }\n\n    /**\n     * 检查按钮是否可见\n     */\n    private isVisible(id: string): boolean {\n        return this.options.visibility?.[id] !== false;\n    }\n\n    /**\n     * 销毁组件，清理资源\n     */\n    public destroy(): void {\n        this.closeDropdown();\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n        this.activeBtnIds.clear();\n        this.groups = [];\n    }\n}","import type { ToolbarColors } from '../toolbar/index.type';\nimport { OptBtnGroups } from '../toolbar';\nimport type { ButtonConfig } from '../toolbar/index.type';\n\n/**\n * 工具栏管理器\n * 负责管理底部操作栏的按钮组、按钮及其可见性等状态。\n */\nexport class ToolbarManager {\n    /** 内部工具栏组件实例 */\n    private optBtnGroups: OptBtnGroups | null = null;\n    /** 工具栏挂载的容器 */\n    private container: HTMLElement;\n\n    /**\n     * 构造函数\n     * @param container 工具栏挂载的容器元素\n     */\n    constructor(container: HTMLElement) {\n        this.container = container;\n        this.init();\n    }\n\n    /**\n     * 初始化工具栏\n     */\n    private init() {\n        this.optBtnGroups = new OptBtnGroups({\n            container: this.container,\n            showLabel: true\n        });\n\n        // 初始化并加载默认按钮配置\n        this.optBtnGroups.init().catch(err => {\n            console.error('Failed to initialize OptBtnGroups:', err);\n        });\n    }\n\n    /**\n     * 添加一个工具栏按钮组\n     * @param groupId 新组的 ID\n     * @param beforeGroupId (可选) 插入到哪个组之前，不传则追加到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.addGroup(groupId, beforeGroupId);\n            this.optBtnGroups.render(); // 重新渲染以更新 UI\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 添加一个工具栏按钮\n     * @param config 按钮配置对象\n     */\n    public addButton(config: ButtonConfig) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.addButton(config);\n            this.optBtnGroups.render(); // 重新渲染以更新 UI\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置按钮的可见性\n     * @param buttonId 按钮 ID\n     * @param visible 是否可见\n     */\n    public setButtonVisibility(buttonId: string, visible: boolean) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.updateButtonVisibility(buttonId, visible);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置是否显示按钮下方的文字标签\n     * @param show 是否显示\n     */\n    public setShowLabel(show: boolean) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setShowLabel(show);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置整个工具栏的可见性\n     * @param visible 是否可见\n     */\n    public setVisible(visible: boolean) {\n        this.container.style.display = visible ? 'block' : 'none';\n    }\n\n    /**\n     * 设置工具栏背景颜色\n     * @param color CSS 颜色值\n     */\n    public setBackgroundColor(color: string) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setBackgroundColor(color);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置工具栏详细颜色配置\n     * @param colors 颜色配置对象\n     */\n    public setColors(colors: ToolbarColors) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setColors(colors);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 销毁工具栏管理器\n     */\n    public destroy() {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.destroy();\n            this.optBtnGroups = null;\n        }\n    }\n}\n","import './index.css';\nimport type { DialogOptions } from './index.type';\n\n/**\n * 通用弹窗组件类\n * 支持拖拽、缩放、自定义内容和位置。\n */\nexport class BimDialog {\n    private element: HTMLElement;\n    private options: DialogOptions;\n    private container: HTMLElement;\n    private header: HTMLElement;\n    private contentArea: HTMLElement;\n    private _isDestroyed = false;\n\n    /**\n     * 构造函数\n     * @param options 弹窗配置选项\n     */\n    constructor(options: DialogOptions) {\n        // 合并默认配置\n        this.options = {\n            title: 'Dialog',\n            width: 300,\n            height: 'auto',\n            position: 'center',\n            draggable: true,\n            resizable: false,\n            minWidth: 200,\n            minHeight: 100,\n            ...options\n        };\n        this.container = options.container;\n\n        // 创建 DOM 结构\n        this.element = this.createDom();\n        this.header = this.element.querySelector('.bim-dialog-header') as HTMLElement;\n        this.contentArea = this.element.querySelector('.bim-dialog-content') as HTMLElement;\n\n        // 初始化\n        this.init();\n    }\n\n    /**\n     * 创建弹窗的 DOM 结构\n     */\n    private createDom(): HTMLElement {\n        const el = document.createElement('div');\n        el.className = 'bim-dialog';\n\n        if (this.options.id) el.id = this.options.id;\n        \n        // 应用颜色配置到 CSS 变量 (局部作用域)\n        const style = el.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-dialog-bg', this.options.backgroundColor);\n        if (this.options.headerBackgroundColor) style.setProperty('--bim-dialog-header-bg', this.options.headerBackgroundColor);\n        if (this.options.titleColor) style.setProperty('--bim-dialog-title-color', this.options.titleColor);\n        if (this.options.textColor) style.setProperty('--bim-dialog-text-color', this.options.textColor);\n        if (this.options.borderColor) style.setProperty('--bim-dialog-border-color', this.options.borderColor);\n\n        // 设置初始尺寸\n        this.setSize(el, this.options.width, this.options.height);\n\n        // 创建标题栏 (Header)\n        const header = document.createElement('div');\n        header.className = 'bim-dialog-header';\n        if (this.options.draggable) header.classList.add('draggable');\n\n        const title = document.createElement('span');\n        title.className = 'bim-dialog-title';\n        title.textContent = this.options.title || '';\n\n        const closeBtn = document.createElement('span');\n        closeBtn.className = 'bim-dialog-close';\n        closeBtn.innerHTML = '&times;';\n        closeBtn.onclick = () => this.close();\n\n        header.appendChild(title);\n        header.appendChild(closeBtn);\n\n        // 创建内容区域 (Content)\n        const content = document.createElement('div');\n        content.className = 'bim-dialog-content';\n        if (typeof this.options.content === 'string') {\n            content.innerHTML = this.options.content;\n        } else if (this.options.content instanceof HTMLElement) {\n            content.appendChild(this.options.content);\n        }\n\n        el.appendChild(header);\n        el.appendChild(content);\n\n        // 如果允许缩放，创建缩放手柄\n        if (this.options.resizable) {\n            const resizeHandle = document.createElement('div');\n            resizeHandle.className = 'bim-dialog-resize-handle';\n            el.appendChild(resizeHandle);\n        }\n\n        return el;\n    }\n\n    /**\n     * 设置元素尺寸\n     */\n    private setSize(el: HTMLElement, width?: number | string, height?: number | string) {\n        if (width !== undefined) {\n            el.style.width = typeof width === 'number' ? `${width}px` : width;\n        }\n        if (height !== undefined) {\n            el.style.height = typeof height === 'number' ? `${height}px` : height;\n        }\n    }\n\n    /**\n     * 初始化组件功能\n     */\n    private init() {\n        this.container.appendChild(this.element);\n\n        // 必须先挂载才能计算尺寸进行定位\n        this.initPosition();\n\n        if (this.options.draggable) {\n            this.initDrag();\n        }\n\n        if (this.options.resizable) {\n            this.initResize();\n        }\n    }\n\n    /**\n     * 初始化弹窗位置\n     */\n    private initPosition() {\n        const pos = this.options.position;\n\n        const elRect = this.element.getBoundingClientRect();\n        \n        // 计算相对父容器的定位\n        let left = 0;\n        let top = 0;\n\n        const pW = this.container.clientWidth;\n        const pH = this.container.clientHeight;\n        const elW = elRect.width;\n        const elH = elRect.height;\n\n        if (typeof pos === 'object' && 'x' in pos) {\n            left = pos.x;\n            top = pos.y;\n        } else {\n            switch (pos) {\n                case 'center':\n                    left = (pW - elW) / 2;\n                    top = (pH - elH) / 2;\n                    break;\n                case 'top-left': left = 0; top = 0; break;\n                case 'top-center': left = (pW - elW) / 2; top = 0; break;\n                case 'top-right': left = pW - elW; top = 0; break;\n                case 'left-center': left = 0; top = (pH - elH) / 2; break;\n                case 'right-center': left = pW - elW; top = (pH - elH) / 2; break;\n                case 'bottom-left': left = 0; top = pH - elH; break;\n                case 'bottom-center': left = (pW - elW) / 2; top = pH - elH; break;\n                case 'bottom-right': left = pW - elW; top = pH - elH; break;\n                default:\n                    left = (pW - elW) / 2;\n                    top = (pH - elH) / 2;\n            }\n        }\n\n        // 简单的边界检查，防止初始位置溢出\n        left = Math.max(0, Math.min(left, pW - elW));\n        top = Math.max(0, Math.min(top, pH - elH));\n\n        this.element.style.left = `${left}px`;\n        this.element.style.top = `${top}px`;\n    }\n\n    /**\n     * 初始化拖拽功能\n     */\n    private initDrag() {\n        let startX = 0;\n        let startY = 0;\n        let startLeft = 0;\n        let startTop = 0;\n\n        const onMouseDown = (e: MouseEvent) => {\n            e.preventDefault();\n            startX = e.clientX;\n            startY = e.clientY;\n            startLeft = this.element.offsetLeft;\n            startTop = this.element.offsetTop;\n\n            document.addEventListener('mousemove', onMouseMove);\n            document.addEventListener('mouseup', onMouseUp);\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            const dx = e.clientX - startX;\n            const dy = e.clientY - startY;\n\n            let newLeft = startLeft + dx;\n            let newTop = startTop + dy;\n\n            // 边界限制，防止拖出容器\n            const maxLeft = this.container.clientWidth - this.element.offsetWidth;\n            const maxTop = this.container.clientHeight - this.element.offsetHeight;\n\n            newLeft = Math.max(0, Math.min(newLeft, maxLeft));\n            newTop = Math.max(0, Math.min(newTop, maxTop));\n\n            this.element.style.left = `${newLeft}px`;\n            this.element.style.top = `${newTop}px`;\n        };\n\n        const onMouseUp = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        };\n\n        this.header.addEventListener('mousedown', onMouseDown);\n    }\n\n    /**\n     * 初始化缩放功能\n     */\n    private initResize() {\n        const handle = this.element.querySelector('.bim-dialog-resize-handle') as HTMLElement;\n        if (!handle) return;\n\n        let startX = 0;\n        let startY = 0;\n        let startW = 0;\n        let startH = 0;\n\n        const onMouseDown = (e: MouseEvent) => {\n            e.preventDefault();\n            e.stopPropagation();\n            startX = e.clientX;\n            startY = e.clientY;\n            startW = this.element.offsetWidth;\n            startH = this.element.offsetHeight;\n\n            document.addEventListener('mousemove', onMouseMove);\n            document.addEventListener('mouseup', onMouseUp);\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            const dx = e.clientX - startX;\n            const dy = e.clientY - startY;\n\n            const newW = Math.max(this.options.minWidth || 100, startW + dx);\n            const newH = Math.max(this.options.minHeight || 50, startH + dy);\n\n            this.element.style.width = `${newW}px`;\n            this.element.style.height = `${newH}px`;\n        };\n\n        const onMouseUp = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        };\n\n        handle.addEventListener('mousedown', onMouseDown);\n    }\n\n    /**\n     * 动态设置内容\n     * @param content 内容元素或 HTML 字符串\n     */\n    public setContent(content: HTMLElement | string) {\n        this.contentArea.innerHTML = '';\n        if (typeof content === 'string') {\n            this.contentArea.innerHTML = content;\n        } else {\n            this.contentArea.appendChild(content);\n        }\n    }\n\n    /**\n     * 关闭弹窗并销毁\n     */\n    public close() {\n        if (this._isDestroyed) return;\n        this.element.remove();\n        this._isDestroyed = true;\n        if (this.options.onClose) {\n            this.options.onClose();\n        }\n    }\n}\n","import './index.css';\nimport { BimDialog } from '../index';\n\n/**\n * BimInfoDialog (二次封装示例)\n * 这是一个展示项目信息的业务弹窗组件，内部封装了 BimDialog。\n */\nexport class BimInfoDialog {\n    private dialog: BimDialog;\n\n    /**\n     * 构造函数\n     * @param container 父容器\n     */\n    constructor(container: HTMLElement) {\n        // 创建自定义的 DOM 内容\n        const contentEl = document.createElement('div');\n        contentEl.className = 'bim-info-dialog-content';\n\n        const infoTitle = document.createElement('h3');\n        infoTitle.textContent = 'Model Information';\n\n        const infoList = document.createElement('ul');\n        infoList.innerHTML = `\n            <li><strong>Name:</strong> Sample Project</li>\n            <li><strong>Version:</strong> 1.0.0</li>\n            <li><strong>Date:</strong> ${new Date().toLocaleDateString()}</li>\n            <li><strong>Status:</strong> <span style=\"color: green;\">Active</span></li>\n        `;\n\n        const actionBtn = document.createElement('button');\n        actionBtn.textContent = 'Update Status';\n        actionBtn.style.marginTop = '10px';\n        actionBtn.onclick = () => {\n            alert('Status updated!');\n        };\n\n        contentEl.appendChild(infoTitle);\n        contentEl.appendChild(infoList);\n        contentEl.appendChild(actionBtn);\n\n        // 初始化 BimDialog，直接传入构建好的 HTMLElement\n        this.dialog = new BimDialog({\n            container: container,\n            title: 'Project Info (Wrapped)',\n            content: contentEl, \n            width: 320,\n            height: 'auto',\n            position: 'center',\n            resizable: true,\n            draggable: true\n        });\n    }\n\n    /**\n     * 关闭弹窗\n     */\n    public close() {\n        this.dialog.close();\n    }\n}","import { BimDialog } from '../dialog';\nimport { BimInfoDialog } from '../dialog/bimInfoDialog';\nimport type { DialogOptions } from '../dialog/index.type';\n\n/**\n * 弹窗管理器\n * 负责创建和管理应用中的各类弹窗。\n */\nexport class DialogManager {\n    /** 弹窗挂载的父容器 */\n    private container: HTMLElement;\n\n    /**\n     * 构造函数\n     * @param container 弹窗挂载的目标容器\n     */\n    constructor(container: HTMLElement) {\n        this.container = container;\n    }\n\n    /**\n     * 创建一个通用弹窗\n     * @param options 弹窗配置选项（不需要传 container，自动使用管理器绑定的容器）\n     * @returns BimDialog 实例\n     */\n    public create(options: Omit<DialogOptions, 'container'>): BimDialog {\n        return new BimDialog({\n            container: this.container,\n            ...options\n        });\n    }\n\n    /**\n     * 显示二次封装的模型信息弹窗\n     * 演示如何调用特定的业务弹窗组件\n     */\n    public showInfoDialog() {\n        new BimInfoDialog(this.container);\n    }\n}","import './bim-engine.css';\nimport { ToolbarManager } from './modules/toolbar-manager';\nimport { DialogManager } from './modules/dialog-manager';\n\n/**\n * BimEngine 主类\n * 负责初始化整个应用界面，协调各个子模块（如工具栏、弹窗等）。\n */\nexport class BimEngine {\n    /** 主容器元素 */\n    private container: HTMLElement;\n    /** 内部包装器元素，用于承载所有 UI 组件 */\n    private wrapper: HTMLElement | null = null;\n    \n    /** 工具栏管理器实例 */\n    public toolbar: ToolbarManager | null = null;\n    /** 弹窗管理器实例 */\n    public dialog: DialogManager | null = null;\n\n    /**\n     * 构造函数\n     * @param container 容器元素或容器 ID\n     */\n    constructor(container: HTMLElement | string) {\n        const el = typeof container === 'string' ? document.getElementById(container) : container;\n        if (!el) throw new Error('Container not found');\n        this.container = el;\n        this.init();\n    }\n\n    /**\n     * 初始化方法\n     * 创建 DOM 结构并初始化各子模块\n     */\n    private init() {\n        // 1. 清空容器可能存在的旧内容\n        this.container.innerHTML = '';\n\n        // 2. 创建外层容器 div\n        this.wrapper = document.createElement('div');\n        this.wrapper.className = 'bim-engine-wrapper';\n\n        // 3. 创建标题 h1\n        const title = document.createElement('h1');\n        title.textContent = 'BimEngine';\n        title.className = 'bim-engine-title';\n\n        // 4. 创建描述段落 p\n        const desc = document.createElement('p');\n        desc.textContent = '这是一个使用BIM-ENGINE。';\n        desc.className = 'bim-engine-desc';\n\n        // 6. 创建操作按钮组容器\n        const btnGroupContainer = document.createElement('div');\n        btnGroupContainer.id = 'opt-btn-groups';\n        btnGroupContainer.className = 'bim-engine-opt-btn-container';\n\n        // 7. 组装元素\n        this.wrapper.appendChild(title);\n        this.wrapper.appendChild(desc);\n        \n        // 初始化管理器\n        this.dialog = new DialogManager(this.wrapper);\n        this.toolbar = new ToolbarManager(btnGroupContainer);\n\n        // 5. 测试按钮（更新为使用管理器）\n        // 5.1 创建普通测试弹窗按钮\n        const dialogBtn = document.createElement('button');\n        dialogBtn.textContent = '打开测试弹窗';\n        dialogBtn.className = 'bim-engine-btn';\n        dialogBtn.onclick = () => {\n            this.dialog?.create({\n                title: '测试弹窗',\n                content: '<div style=\"padding: 10px;\">这是一个 <b>可拖拽</b> 且 <b>可缩放</b> 的弹窗。<br><br>你可以尝试拖动标题栏，或者拖动右下角改变大小。</div>',\n                width: 300,\n                height: 400,\n                position: 'top-left',\n                draggable: true,\n                resizable: true\n            });\n        };\n\n        // 5.2 创建二次封装信息弹窗按钮\n        const infoDialogBtn = document.createElement('button');\n        infoDialogBtn.textContent = '打开信息弹窗 (封装版)';\n        infoDialogBtn.className = 'bim-engine-btn';\n        infoDialogBtn.style.marginLeft = '10px';\n        infoDialogBtn.onclick = () => {\n            this.dialog?.showInfoDialog();\n        };\n\n        // 将按钮和工具栏容器添加到包装器中\n        this.wrapper.appendChild(dialogBtn);\n        this.wrapper.appendChild(infoDialogBtn);\n        this.wrapper.appendChild(btnGroupContainer);\n\n        // 8. 将包装器挂载到主容器\n        this.container.appendChild(this.wrapper);\n    }\n\n    /**\n     * 销毁实例\n     * 清理所有资源和 DOM 元素\n     */\n    public destroy() {\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = null;\n        }\n        this.dialog = null;\n        this.container.innerHTML = '';\n    }\n}","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 首页按钮配置\n */\nexport const homeButton: ButtonConfig = {\n    id: 'home',\n    groupId: 'group-1',\n    type: 'button',\n    label: '首页',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M4 21V9l8-6l8 6v12h-6v-7h-4v7z\"/></svg>',\n    keepActive: true,\n    onClick: (button) => {\n        console.log('首页按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const locationButton: ButtonConfig = {\n    id: 'location',\n    groupId: 'group-1',\n    type: 'button',\n    label: '定位',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 13h2v-2.75h2V13h2V8.25l-3-2l-3 2zm3 9q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 2.5-1.987 5.438T12 22\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('定位按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\n/**\n * 漫游菜单按钮配置\n */\nexport const walkMenuButton: ButtonConfig = {\n    id: 'walk',\n    groupId: 'group-1',\n    type: 'menu',\n    label: '漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    keepActive: true,\n    onClick: (button) => {\n        console.log('漫游按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\nexport const walkPersonButton: ButtonConfig = {\n    id: 'walk-person',\n    groupId: 'group-1',\n    parentId: 'walk',\n    type: 'button',\n    label: '人视漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    onClick: (button) => {\n        console.log('人视漫游被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\nexport const walkBirdButton: ButtonConfig = {\n    id: 'walk-bird',\n    groupId: 'group-1',\n    parentId: 'walk',\n    type: 'button',\n    label: '鸟瞰漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    onClick: (button) => {\n        console.log('鸟瞰漫游被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const settingButton: ButtonConfig = {\n    id: 'setting',\n    groupId: 'group-2',\n    type: 'button',\n    label: '设置',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('设置按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const infoButton: ButtonConfig = {\n    id: 'info',\n    groupId: 'group-2',\n    type: 'button',\n    label: '信息',\n    icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 7q.425 0 .713-.288T13 6t-.288-.712T12 5t-.712.288T11 6t.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9t-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18z\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('信息按钮被点击:', button.id);\n    }\n};\n"],"names":["OptBtnGroups","options","el","style","colors","groupId","beforeGroupId","g","newGroup","index","config","parentId","group","button","parentBtn","buttons","id","btn","found","homeButton","index$6","locationButton","index$5","walkMenuButton","index$4","walkPersonButton","index$3","walkBirdButton","index$2","settingButton","index$1","infoButton","wrapper","groupElement","total","groupEl","btnWrapper","btnEl","icon","label","arrow","dropdown","rect","centerX","subBtn","item","e","buttonId","visible","show","color","ToolbarManager","container","err","BimDialog","header","title","closeBtn","content","resizeHandle","width","height","pos","elRect","left","top","pW","pH","elW","elH","startX","startY","startLeft","startTop","onMouseDown","onMouseMove","onMouseUp","dx","dy","newLeft","newTop","maxLeft","maxTop","handle","startW","startH","newW","newH","BimInfoDialog","contentEl","infoTitle","infoList","actionBtn","DialogManager","BimEngine","desc","btnGroupContainer","dialogBtn","infoDialogBtn"],"mappings":"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"}