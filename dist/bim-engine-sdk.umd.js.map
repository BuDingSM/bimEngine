{"version":3,"file":"bim-engine-sdk.umd.js","sources":["../src/toolbar/index.ts","../src/bim-engine.ts","../src/toolbar/buttons/home/index.ts","../src/toolbar/buttons/location/index.ts","../src/toolbar/buttons/walk/walk-menu/index.ts","../src/toolbar/buttons/walk/walk-person/index.ts","../src/toolbar/buttons/walk/walk-bird/index.ts","../src/toolbar/buttons/setting/index.ts","../src/toolbar/buttons/info/index.ts"],"sourcesContent":["import './index.css';\nimport type {\n    OptButton,\n    ButtonGroup,\n    OptBtnGroupsOptions,\n    ButtonConfig\n} from './index.type';\n\nexport class OptBtnGroups {\n    private container: HTMLElement;\n    private options: OptBtnGroupsOptions;\n    // 改用 Array 存储 Group，方便控制顺序\n    private groups: ButtonGroup[] = [];\n    private activeBtnIds: Set<string> = new Set();\n    private btnRefs: Map<string, HTMLElement> = new Map();\n    private dropdownElement: HTMLElement | null = null;\n    private hoverTimeout: number | null = null;\n\n    private readonly DEFAULT_ICON = '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect></svg>';\n\n    constructor(options: OptBtnGroupsOptions) {\n        const el = typeof options.container === 'string'\n            ? document.getElementById(options.container)\n            : options.container;\n\n        if (!el) throw new Error('Container not found');\n\n        this.container = el;\n        this.options = {\n            showLabel: true,\n            visibility: {},\n            ...options\n        };\n\n        this.initContainer();\n    }\n\n    private initContainer(): void {\n        this.container.innerHTML = '';\n    }\n\n    /**\n     * 添加按钮组\n     * @param groupId 组ID\n     * @param beforeGroupId 在哪个组之前插入（可选），不传则插入到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string): void {\n        if (this.groups.some(g => g.id === groupId)) {\n            console.warn('Group ' + groupId + ' already exists');\n            return;\n        }\n\n        const newGroup: ButtonGroup = { id: groupId, buttons: [] };\n\n        if (beforeGroupId) {\n            const index = this.groups.findIndex(g => g.id === beforeGroupId);\n            if (index !== -1) {\n                this.groups.splice(index, 0, newGroup);\n            } else {\n                console.warn(`Target group ${beforeGroupId} not found, appending ${groupId} to end.`);\n                this.groups.push(newGroup);\n            }\n        } else {\n            this.groups.push(newGroup);\n        }\n    }\n\n    /**\n     * 添加按钮\n     * @param config 按钮配置（必须包含 groupId，可选包含 parentId）\n     */\n    public addButton(config: ButtonConfig): void {\n        const { groupId, parentId } = config;\n\n        if (!groupId) {\n            throw new Error(`Button ${config.id} config must contain 'groupId'`);\n        }\n\n        const group = this.groups.find(g => g.id === groupId);\n        if (!group) {\n            throw new Error(`Group ${groupId} not found. Please call addGroup first.`);\n        }\n\n        const button: OptButton = {\n            ...config,\n            children: config.children || []\n        };\n\n        if (parentId) {\n            // Add as sub-button\n            const parentBtn = this.findButton(group.buttons, parentId);\n            if (!parentBtn) {\n                throw new Error(`Parent button ${parentId} not found in group ${groupId}`);\n            }\n            if (!parentBtn.children) {\n                parentBtn.children = [];\n            }\n            parentBtn.children.push(button);\n        } else {\n            // Add as main button\n            group.buttons.push(button);\n        }\n    }\n\n    private findButton(buttons: OptButton[], id: string): OptButton | undefined {\n        for (const btn of buttons) {\n            if (btn.id === id) return btn;\n            if (btn.children) {\n                const found = this.findButton(btn.children, id);\n                if (found) return found;\n            }\n        }\n        return undefined;\n    }\n\n    public async init(): Promise<void> {\n        const { homeButton } = await import('./buttons/home');\n        const { locationButton } = await import('./buttons/location');\n        const { walkMenuButton } = await import('./buttons/walk/walk-menu');\n        const { walkPersonButton } = await import('./buttons/walk/walk-person');\n        const { walkBirdButton } = await import('./buttons/walk/walk-bird');\n        const { settingButton } = await import('./buttons/setting');\n        const { infoButton } = await import('./buttons/info');\n\n        // 添加组1\n        this.addGroup('group-1');\n        this.addButton(homeButton);\n        this.addButton(walkMenuButton);\n        this.addButton(walkPersonButton);\n        this.addButton(walkBirdButton);\n        this.addButton(locationButton);\n        this.addGroup('group-2');\n        this.addButton(settingButton);\n        this.addButton(infoButton);\n        this.render();\n    }\n\n    public render(): void {\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'toolbar-container';\n\n        // 直接遍历数组，顺序由 addGroup 控制\n        this.groups.forEach((group, index) => {\n            const groupElement = this.renderGroup(group, index, this.groups.length);\n            wrapper.appendChild(groupElement);\n        });\n\n        this.container.appendChild(wrapper);\n    }\n\n    private renderGroup(group: ButtonGroup, index: number, total: number): HTMLElement {\n        const groupEl = document.createElement('div');\n        groupEl.className = 'opt-btn-group';\n\n        if (index < total - 1) {\n            groupEl.classList.add('has-divider');\n        }\n\n        group.buttons.forEach(button => {\n            if (this.isVisible(button.id)) {\n                const btnWrapper = this.renderButton(button);\n                groupEl.appendChild(btnWrapper);\n            }\n        });\n\n        return groupEl;\n    }\n\n    private renderButton(button: OptButton): HTMLElement {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'opt-btn-wrapper';\n\n        const btnEl = document.createElement('div');\n        btnEl.className = 'opt-btn';\n\n        if (this.activeBtnIds.has(button.id)) {\n            btnEl.classList.add('active');\n        }\n\n        if (button.disabled) {\n            btnEl.classList.add('disabled');\n        }\n\n        if (!this.options.showLabel) {\n            btnEl.classList.add('no-label');\n            if (button.label) {\n                btnEl.title = button.label;\n            }\n        }\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon';\n        icon.innerHTML = this.getIcon(button.icon);\n        btnEl.appendChild(icon);\n\n        if (this.options.showLabel && button.label) {\n            const label = document.createElement('span');\n            label.className = 'opt-btn-label';\n            label.textContent = button.label;\n            btnEl.appendChild(label);\n        }\n\n        if (button.children && button.children.length > 0) {\n            const arrow = document.createElement('span');\n            arrow.className = 'opt-btn-arrow';\n            arrow.textContent = '▼';\n            btnEl.appendChild(arrow);\n        }\n\n        btnEl.addEventListener('click', () => this.handleClick(button));\n        btnEl.addEventListener('mouseenter', () => this.handleMouseEnter(button, btnEl));\n        btnEl.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        this.btnRefs.set(button.id, btnEl);\n\n        wrapper.appendChild(btnEl);\n        return wrapper;\n    }\n\n    private handleClick(button: OptButton): void {\n        if (button.disabled) return;\n\n        if (!button.children || button.children.length === 0) {\n            if (button.keepActive) {\n                const wasActive = this.activeBtnIds.has(button.id);\n                if (wasActive) {\n                    this.activeBtnIds.delete(button.id);\n                } else {\n                    this.activeBtnIds.add(button.id);\n                }\n                this.updateButtonState(button.id);\n            }\n\n            this.closeDropdown();\n\n            if (button.onClick) {\n                button.onClick(button);\n            }\n        }\n    }\n\n    private handleSubClick(button: OptButton): void {\n        if (button.keepActive) {\n            const wasActive = this.activeBtnIds.has(button.id);\n            if (wasActive) {\n                this.activeBtnIds.delete(button.id);\n            } else {\n                this.activeBtnIds.add(button.id);\n            }\n            this.updateButtonState(button.id);\n        }\n\n        this.closeDropdown();\n\n        if (button.onClick) {\n            button.onClick(button);\n        }\n    }\n\n    private handleMouseEnter(button: OptButton, btnEl: HTMLElement): void {\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n            this.hoverTimeout = null;\n        }\n\n        if (button.children && button.children.length > 0) {\n            this.showDropdown(button, btnEl);\n\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.add('rotated');\n            }\n        } else {\n            this.closeDropdown();\n        }\n    }\n\n    private handleMouseLeave(): void {\n        this.hoverTimeout = window.setTimeout(() => {\n            this.closeDropdown();\n        }, 200);\n    }\n\n    private showDropdown(button: OptButton, btnEl: HTMLElement): void {\n        this.closeDropdown();\n\n        if (!button.children) return;\n\n        const dropdown = document.createElement('div');\n        dropdown.className = 'opt-btn-dropdown';\n\n        const rect = btnEl.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n\n        dropdown.style.top = rect.top - 8 + 'px';\n        dropdown.style.left = centerX + 'px';\n\n        button.children.forEach(subBtn => {\n            if (this.isVisible(subBtn.id)) {\n                const item = this.renderDropdownItem(subBtn);\n                dropdown.appendChild(item);\n            }\n        });\n\n        dropdown.addEventListener('mouseenter', () => {\n            if (this.hoverTimeout) {\n                clearTimeout(this.hoverTimeout);\n                this.hoverTimeout = null;\n            }\n        });\n\n        dropdown.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        document.body.appendChild(dropdown);\n        this.dropdownElement = dropdown;\n    }\n\n    private renderDropdownItem(button: OptButton): HTMLElement {\n        const item = document.createElement('div');\n        item.className = 'opt-btn-dropdown-item';\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon small';\n        icon.innerHTML = this.getIcon(button.icon);\n        item.appendChild(icon);\n\n        if (this.options.showLabel) {\n            const label = document.createElement('span');\n            label.textContent = button.label;\n            item.appendChild(label);\n        }\n\n        item.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.handleSubClick(button);\n        });\n\n        return item;\n    }\n\n    private closeDropdown(): void {\n        if (this.dropdownElement) {\n            this.dropdownElement.remove();\n            this.dropdownElement = null;\n        }\n\n        this.btnRefs.forEach(btnEl => {\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.remove('rotated');\n            }\n        });\n    }\n\n    private updateButtonState(buttonId: string): void {\n        const btnEl = this.btnRefs.get(buttonId);\n        if (btnEl) {\n            if (this.activeBtnIds.has(buttonId)) {\n                btnEl.classList.add('active');\n            } else {\n                btnEl.classList.remove('active');\n            }\n        }\n    }\n\n    private getIcon(icon?: string): string {\n        return icon || this.DEFAULT_ICON;\n    }\n\n    private isVisible(id: string): boolean {\n        return this.options.visibility?.[id] !== false;\n    }\n\n    public destroy(): void {\n        this.closeDropdown();\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n        this.activeBtnIds.clear();\n        this.groups = []; // 清空数组\n    }\n}","import './bim-engine.css';\nimport { OptBtnGroups } from './toolbar';\n\nexport class BimEngine {\n    private container: HTMLElement;\n    private optBtnGroups: OptBtnGroups | null = null;\n\n    constructor(container: HTMLElement | string) {\n        const el = typeof container === 'string' ? document.getElementById(container) : container;\n        if (!el) throw new Error('Container not found');\n        this.container = el;\n        this.init();\n    }\n\n    private init() {\n        // 1. 清空容器可能存在的旧内容\n        this.container.innerHTML = '';\n\n        // 2. 创建外层容器 div\n        const wrapper = document.createElement('div');\n        wrapper.className = 'bim-engine-wrapper';\n\n        // 3. 创建标题 h1\n        const title = document.createElement('h1');\n        title.textContent = 'BimEngine';\n        title.className = 'bim-engine-title';\n\n        // 4. 创建段落 p\n        const desc = document.createElement('p');\n        desc.textContent = '这是一个使用BIM-ENGINE。';\n        desc.className = 'bim-engine-desc';\n\n        // 6. 创建操作按钮组容器\n        const btnGroupContainer = document.createElement('div');\n        btnGroupContainer.id = 'opt-btn-groups';\n        btnGroupContainer.className = 'bim-engine-opt-btn-container';\n\n        // 7. 组装元素\n        wrapper.appendChild(title);\n        wrapper.appendChild(desc);\n        wrapper.appendChild(btnGroupContainer); // 将按钮组放入 wrapper 中\n\n        // 8. 挂载到主容器\n        this.container.appendChild(wrapper);\n\n        // 9. 初始化操作按钮组\n        this.initOptBtnGroups(btnGroupContainer);\n    }\n\n    private initOptBtnGroups(container: HTMLElement) {\n        this.optBtnGroups = new OptBtnGroups({\n            container,\n            showLabel: true\n        });\n\n        // 初始化并加载默认按钮\n        this.optBtnGroups.init().catch(err => {\n            console.error('Failed to initialize OptBtnGroups:', err);\n        });\n    }\n\n    public destroy() {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.destroy();\n            this.optBtnGroups = null;\n        }\n        this.container.innerHTML = '';\n    }\n}","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 首页按钮配置\n */\nexport const homeButton: ButtonConfig = {\n    id: 'home',\n    groupId: 'group-1',\n    type: 'button',\n    label: '首页',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M4 21V9l8-6l8 6v12h-6v-7h-4v7z\"/></svg>',\n    keepActive: true,\n    onClick: (button) => {\n        console.log('首页按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const locationButton: ButtonConfig = {\n    id: 'location',\n    groupId: 'group-1',\n    type: 'button',\n    label: '定位',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 13h2v-2.75h2V13h2V8.25l-3-2l-3 2zm3 9q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 2.5-1.987 5.438T12 22\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('定位按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\n/**\n * 漫游菜单按钮配置\n */\nexport const walkMenuButton: ButtonConfig = {\n    id: 'walk',\n    groupId: 'group-1',\n    type: 'menu',\n    label: '漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    keepActive: true,\n    onClick: (button) => {\n        console.log('漫游按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\nexport const walkPersonButton: ButtonConfig = {\n    id: 'walk-person',\n    groupId: 'group-1',\n    parentId: 'walk',\n    type: 'button',\n    label: '人视漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    onClick: (button) => {\n        console.log('人视漫游被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../../index.type';\n\nexport const walkBirdButton: ButtonConfig = {\n    id: 'walk-bird',\n    groupId: 'group-1',\n    parentId: 'walk',\n    type: 'button',\n    label: '鸟瞰漫游',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 22V8.775q-2.275-.6-3.637-2.512T4 2h2q0 2.075 1.338 3.538T10.75 7h2.5q.75 0 1.4.275t1.175.8L20.35 12.6l-1.4 1.4L15 10.05V22h-2v-6h-2v6zm3-16q-.825 0-1.412-.587T10 4t.588-1.412T12 2t1.413.588T14 4t-.587 1.413T12 6\"/></svg>',\n    onClick: (button) => {\n        console.log('鸟瞰漫游被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const settingButton: ButtonConfig = {\n    id: 'setting',\n    groupId: 'group-2',\n    type: 'button',\n    label: '设置',\n    icon: '<svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('设置按钮被点击:', button.id);\n    }\n};\n","import type { ButtonConfig } from '../../index.type';\n\n/**\n * 定位按钮配置\n */\nexport const infoButton: ButtonConfig = {\n    id: 'info',\n    groupId: 'group-2',\n    type: 'button',\n    label: '信息',\n    icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 7q.425 0 .713-.288T13 6t-.288-.712T12 5t-.712.288T11 6t.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9t-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18z\"/></svg>',\n    keepActive: false,\n    onClick: (button) => {\n        console.log('信息按钮被点击:', button.id);\n    }\n};\n"],"names":["OptBtnGroups","options","el","groupId","beforeGroupId","g","newGroup","index","config","parentId","group","button","parentBtn","buttons","id","btn","found","homeButton","index$6","locationButton","index$5","walkMenuButton","index$4","walkPersonButton","index$3","walkBirdButton","index$2","settingButton","index$1","infoButton","wrapper","groupElement","total","groupEl","btnWrapper","btnEl","icon","label","arrow","dropdown","rect","centerX","subBtn","item","e","buttonId","BimEngine","container","title","desc","btnGroupContainer","err"],"mappings":"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"}