{"version":3,"file":"bim-engine-sdk.es.js","sources":["../src/toolbar/index.ts","../src/modules/toolbar-manager.ts","../src/dialog/index.ts","../src/dialog/bimInfoDialog/index.ts","../src/modules/dialog-manager.ts","../src/bim-engine.ts"],"sourcesContent":["import './index.css';\nimport type {\n    OptButton,\n    ButtonGroup,\n    OptBtnGroupsOptions,\n    ButtonConfig,\n    ToolbarColors\n} from './index.type';\n\n/**\n * 底部操作按钮组组件\n * 负责渲染和管理底部工具栏的按钮、下拉菜单及相关交互。\n */\nexport class OptBtnGroups {\n    /** 挂载容器 */\n    private container: HTMLElement;\n    /** 组件配置选项 */\n    private options: OptBtnGroupsOptions;\n    /** 按钮组列表，按顺序存储 */\n    private groups: ButtonGroup[] = [];\n    /** 当前处于激活状态的按钮 ID 集合 */\n    private activeBtnIds: Set<string> = new Set();\n    /** 按钮 DOM 元素的引用映射，方便快速查找 */\n    private btnRefs: Map<string, HTMLElement> = new Map();\n    /** 当��显示的下拉菜单元素 */\n    private dropdownElement: HTMLElement | null = null;\n    /** 鼠标悬停计时器，用于处理菜单显示的防抖 */\n    private hoverTimeout: number | null = null;\n\n    /** 默认图标 SVG */\n    private readonly DEFAULT_ICON = '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect></svg>';\n\n    /**\n     * 构造函数\n     * @param options 配置选项\n     */\n    constructor(options: OptBtnGroupsOptions) {\n        const el = typeof options.container === 'string'\n            ? document.getElementById(options.container)\n            : options.container;\n\n        if (!el) throw new Error('Container not found');\n\n        this.container = el;\n        this.options = {\n            showLabel: true,\n            visibility: {},\n            ...options\n        };\n\n        this.initContainer();\n        this.applyStyles(); // 应用初始样式配置\n    }\n\n    /**\n     * 初始化容器\n     */\n    private initContainer(): void {\n        this.container.innerHTML = '';\n        this.container.classList.add('toolbar-root'); // 添加一个根类方便定位样式\n    }\n\n    /**\n     * 应用样式配置到 CSS 变量\n     */\n    private applyStyles(): void {\n        const style = this.container.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-toolbar-bg', this.options.backgroundColor);\n        if (this.options.btnBackgroundColor) style.setProperty('--bim-btn-bg', this.options.btnBackgroundColor);\n        if (this.options.btnHoverColor) style.setProperty('--bim-btn-hover-bg', this.options.btnHoverColor);\n        if (this.options.btnActiveColor) style.setProperty('--bim-btn-active-bg', this.options.btnActiveColor);\n        if (this.options.iconColor) style.setProperty('--bim-icon-color', this.options.iconColor);\n        if (this.options.iconActiveColor) style.setProperty('--bim-icon-active-color', this.options.iconActiveColor);\n        if (this.options.textColor) style.setProperty('--bim-btn-text-color', this.options.textColor);\n        if (this.options.textActiveColor) style.setProperty('--bim-btn-text-active-color', this.options.textActiveColor);\n    }\n\n    /**\n     * 更新颜色配置\n     * @param colors 颜色配置对象\n     */\n    public setColors(colors: ToolbarColors): void {\n        // 更新 options\n        this.options = { ...this.options, ...colors };\n        // 应用到 CSS 变量\n        this.applyStyles();\n    }\n\n    /**\n     * 添加按钮组\n     * @param groupId 组ID\n     * @param beforeGroupId 在哪个组之前插入（可选���，不传则插入到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string): void {\n        if (this.groups.some(g => g.id === groupId)) {\n            console.warn('Group ' + groupId + ' already exists');\n            return;\n        }\n\n        const newGroup: ButtonGroup = { id: groupId, buttons: [] };\n\n        if (beforeGroupId) {\n            const index = this.groups.findIndex(g => g.id === beforeGroupId);\n            if (index !== -1) {\n                this.groups.splice(index, 0, newGroup);\n            } else {\n                console.warn(`Target group ${beforeGroupId} not found, appending ${groupId} to end.`);\n                this.groups.push(newGroup);\n            }\n        } else {\n            this.groups.push(newGroup);\n        }\n    }\n\n    /**\n     * 添加按钮到指定组\n     * @param config 按钮配置（必须包含 groupId，可选包含 parentId）\n     */\n    public addButton(config: ButtonConfig): void {\n        const { groupId, parentId } = config;\n\n        if (!groupId) {\n            throw new Error(`Button ${config.id} config must contain 'groupId'`);\n        }\n\n        const group = this.groups.find(g => g.id === groupId);\n        if (!group) {\n            throw new Error(`Group ${groupId} not found. Please call addGroup first.`);\n        }\n\n        const button: OptButton = {\n            ...config,\n            children: config.children || []\n        };\n\n        if (parentId) {\n            // 添加为子按钮（菜单项）\n            const parentBtn = this.findButton(group.buttons, parentId);\n            if (!parentBtn) {\n                throw new Error(`Parent button ${parentId} not found in group ${groupId}`);\n            }\n            if (!parentBtn.children) {\n                parentBtn.children = [];\n            }\n            parentBtn.children.push(button);\n        } else {\n            // 添加为主按钮\n            group.buttons.push(button);\n        }\n    }\n\n    /**\n     * 递归查找按钮\n     */\n    private findButton(buttons: OptButton[], id: string): OptButton | undefined {\n        for (const btn of buttons) {\n            if (btn.id === id) return btn;\n            if (btn.children) {\n                const found = this.findButton(btn.children, id);\n                if (found) return found;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * 初始化组件，加载默认按钮配置\n     */\n    public async init(): Promise<void> {\n        // 动态导入默认按钮配置\n        const { homeButton } = await import('./buttons/home');\n        const { locationButton } = await import('./buttons/location');\n        const { walkMenuButton } = await import('./buttons/walk/walk-menu');\n        const { walkPersonButton } = await import('./buttons/walk/walk-person');\n        const { walkBirdButton } = await import('./buttons/walk/walk-bird');\n        const { settingButton } = await import('./buttons/setting');\n        const { infoButton } = await import('./buttons/info');\n\n        // 配置默认组和按钮\n        this.addGroup('group-1');\n        this.addButton(homeButton);\n        this.addButton(walkMenuButton);\n        this.addButton(walkPersonButton);\n        this.addButton(walkBirdButton);\n        this.addButton(locationButton);\n        this.addGroup('group-2');\n        this.addButton(settingButton);\n        this.addButton(infoButton);\n        this.render();\n    }\n\n    /**\n     * 渲染整个工具栏\n     */\n    public render(): void {\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'toolbar-container';\n\n        // 渲染所有组\n        this.groups.forEach((group, index) => {\n            const groupElement = this.renderGroup(group, index, this.groups.length);\n            wrapper.appendChild(groupElement);\n        });\n\n        this.container.appendChild(wrapper);\n    }\n\n    /**\n     * 渲染单个按钮组\n     */\n    private renderGroup(group: ButtonGroup, index: number, total: number): HTMLElement {\n        const groupEl = document.createElement('div');\n        groupEl.className = 'opt-btn-group';\n\n        if (index < total - 1) {\n            groupEl.classList.add('has-divider');\n        }\n\n        group.buttons.forEach(button => {\n            if (this.isVisible(button.id)) {\n                const btnWrapper = this.renderButton(button);\n                groupEl.appendChild(btnWrapper);\n            }\n        });\n\n        return groupEl;\n    }\n\n    /**\n     * 渲染单个按钮\n     */\n    private renderButton(button: OptButton): HTMLElement {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'opt-btn-wrapper';\n\n        const btnEl = document.createElement('div');\n        btnEl.className = 'opt-btn';\n\n        // 设置激活状态\n        if (this.activeBtnIds.has(button.id)) {\n            btnEl.classList.add('active');\n        }\n\n        if (button.disabled) {\n            btnEl.classList.add('disabled');\n        }\n\n        if (!this.options.showLabel) {\n            btnEl.classList.add('no-label');\n            if (button.label) {\n                btnEl.title = button.label;\n            }\n        }\n\n        // 渲染图标\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon';\n        icon.innerHTML = this.getIcon(button.icon);\n        btnEl.appendChild(icon);\n\n        // 渲染标签\n        if (this.options.showLabel && button.label) {\n            const label = document.createElement('span');\n            label.className = 'opt-btn-label';\n            label.textContent = button.label;\n            btnEl.appendChild(label);\n        }\n\n        // 如果有子菜单，渲染箭头\n        if (button.children && button.children.length > 0) {\n            const arrow = document.createElement('span');\n            arrow.className = 'opt-btn-arrow';\n            arrow.textContent = '▼';\n            btnEl.appendChild(arrow);\n        }\n\n        // 绑定事件\n        btnEl.addEventListener('click', () => this.handleClick(button));\n        btnEl.addEventListener('mouseenter', () => this.handleMouseEnter(button, btnEl));\n        btnEl.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        this.btnRefs.set(button.id, btnEl);\n\n        wrapper.appendChild(btnEl);\n        return wrapper;\n    }\n\n    /**\n     * 处理按钮点击事件\n     */\n    private handleClick(button: OptButton): void {\n        if (button.disabled) return;\n\n        // 如果没有子菜单，直接触发\n        if (!button.children || button.children.length === 0) {\n            if (button.keepActive) {\n                const wasActive = this.activeBtnIds.has(button.id);\n                if (wasActive) {\n                    this.activeBtnIds.delete(button.id);\n                } else {\n                    this.activeBtnIds.add(button.id);\n                }\n                this.updateButtonState(button.id);\n            }\n\n            this.closeDropdown();\n\n            if (button.onClick) {\n                button.onClick(button);\n            }\n        }\n    }\n\n    /**\n     * 处理子菜单项点击事件\n     */\n    private handleSubClick(button: OptButton): void {\n        if (button.keepActive) {\n            const wasActive = this.activeBtnIds.has(button.id);\n            if (wasActive) {\n                this.activeBtnIds.delete(button.id);\n            } else {\n                this.activeBtnIds.add(button.id);\n            }\n            this.updateButtonState(button.id);\n        }\n\n        this.closeDropdown();\n\n        if (button.onClick) {\n            button.onClick(button);\n        }\n    }\n\n    /**\n     * 处理鼠标移入事件（显示菜单）\n     */\n    private handleMouseEnter(button: OptButton, btnEl: HTMLElement): void {\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n            this.hoverTimeout = null;\n        }\n\n        if (button.children && button.children.length > 0) {\n            this.showDropdown(button, btnEl);\n\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.add('rotated');\n            }\n        } else {\n            this.closeDropdown();\n        }\n    }\n\n    /**\n     * 处理鼠标移出事件（隐藏菜单）\n     */\n    private handleMouseLeave(): void {\n        this.hoverTimeout = window.setTimeout(() => {\n            this.closeDropdown();\n        }, 200);\n    }\n\n    /**\n     * 显示下拉菜单\n     */\n    private showDropdown(button: OptButton, btnEl: HTMLElement): void {\n        this.closeDropdown();\n\n        if (!button.children) return;\n\n        const dropdown = document.createElement('div');\n        dropdown.className = 'opt-btn-dropdown';\n        \n        // 下拉菜单也应用当前的 CSS 变量样式，因为它们通常挂载在 body 上，所以需要单独设置或者确保能继承\n        // 简单起见，我们可以直接将容器上的 CSS 变量复制过来，或者设置内联样式\n        // 更好的是：如果我们在 this.container 上设置 CSS 变量，\n        // 而 dropdown 挂载在 body 上，它无法继承。\n        // 所以我们需要将 CSS 变量也应用到 dropdown 上。\n        \n        const style = dropdown.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-toolbar-bg', this.options.backgroundColor);\n        if (this.options.btnBackgroundColor) style.setProperty('--bim-btn-bg', this.options.btnBackgroundColor);\n        if (this.options.btnHoverColor) style.setProperty('--bim-btn-hover-bg', this.options.btnHoverColor);\n        if (this.options.btnActiveColor) style.setProperty('--bim-btn-active-bg', this.options.btnActiveColor);\n        if (this.options.iconColor) style.setProperty('--bim-icon-color', this.options.iconColor);\n        if (this.options.iconActiveColor) style.setProperty('--bim-icon-active-color', this.options.iconActiveColor);\n        if (this.options.textColor) style.setProperty('--bim-btn-text-color', this.options.textColor);\n        if (this.options.textActiveColor) style.setProperty('--bim-btn-text-active-color', this.options.textActiveColor);\n\n        const rect = btnEl.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n\n        dropdown.style.top = rect.top - 8 + 'px';\n        dropdown.style.left = centerX + 'px';\n\n        button.children.forEach(subBtn => {\n            if (this.isVisible(subBtn.id)) {\n                const item = this.renderDropdownItem(subBtn);\n                dropdown.appendChild(item);\n            }\n        });\n\n        // 保持菜单显���\n        dropdown.addEventListener('mouseenter', () => {\n            if (this.hoverTimeout) {\n                clearTimeout(this.hoverTimeout);\n                this.hoverTimeout = null;\n            }\n        });\n\n        dropdown.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        document.body.appendChild(dropdown);\n        this.dropdownElement = dropdown;\n    }\n\n    /**\n     * 渲染下拉菜单项\n     */\n    private renderDropdownItem(button: OptButton): HTMLElement {\n        const item = document.createElement('div');\n        item.className = 'opt-btn-dropdown-item';\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon small';\n        icon.innerHTML = this.getIcon(button.icon);\n        item.appendChild(icon);\n\n        if (this.options.showLabel) {\n            const label = document.createElement('span');\n            label.textContent = button.label;\n            item.appendChild(label);\n        }\n\n        item.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.handleSubClick(button);\n        });\n\n        return item;\n    }\n\n    /**\n     * 关闭所有下拉菜单\n     */\n    private closeDropdown(): void {\n        if (this.dropdownElement) {\n            this.dropdownElement.remove();\n            this.dropdownElement = null;\n        }\n\n        this.btnRefs.forEach(btnEl => {\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.remove('rotated');\n            }\n        });\n    }\n\n    /**\n     * 更新按钮的激活状态样式\n     */\n    private updateButtonState(buttonId: string): void {\n        const btnEl = this.btnRefs.get(buttonId);\n        if (btnEl) {\n            if (this.activeBtnIds.has(buttonId)) {\n                btnEl.classList.add('active');\n            } else {\n                btnEl.classList.remove('active');\n            }\n        }\n    }\n\n    /**\n     * 获取图标 SVG 字符串\n     */\n    private getIcon(icon?: string): string {\n        return icon || this.DEFAULT_ICON;\n    }\n\n    /**\n     * 更新按钮可见性\n     * @param buttonId 按钮ID\n     * @param visible 是否可见\n     */\n    public updateButtonVisibility(buttonId: string, visible: boolean): void {\n        if (!this.options.visibility) {\n            this.options.visibility = {};\n        }\n        this.options.visibility[buttonId] = visible;\n        this.render();\n    }\n\n    /**\n     * 设置是否显示标签\n     * @param show 是否显示\n     */\n    public setShowLabel(show: boolean): void {\n        this.options.showLabel = show;\n        this.render();\n    }\n\n    /**\n     * 设置背景颜色 (兼容旧接口)\n     * @param color CSS 颜色值\n     */\n    public setBackgroundColor(color: string): void {\n        this.setColors({ backgroundColor: color });\n    }\n\n    /**\n     * 检查按钮是否可见\n     */\n    private isVisible(id: string): boolean {\n        return this.options.visibility?.[id] !== false;\n    }\n\n    /**\n     * 销毁组件，清理资源\n     */\n    public destroy(): void {\n        this.closeDropdown();\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n        this.activeBtnIds.clear();\n        this.groups = [];\n    }\n}","import type { ToolbarColors } from '../toolbar/index.type';\nimport { OptBtnGroups } from '../toolbar';\nimport type { ButtonConfig } from '../toolbar/index.type';\n\n/**\n * 工具栏管理器\n * 负责管理底部操作栏的按钮组、按钮及其可见性等状态。\n */\nexport class ToolbarManager {\n    /** 内部工具栏组件实例 */\n    private optBtnGroups: OptBtnGroups | null = null;\n    /** 工具栏挂载的容器 */\n    private container: HTMLElement;\n\n    /**\n     * 构造函数\n     * @param container 工具栏挂载的容器元素\n     */\n    constructor(container: HTMLElement) {\n        this.container = container;\n        this.init();\n    }\n\n    /**\n     * 初始化工具栏\n     */\n    private init() {\n        this.optBtnGroups = new OptBtnGroups({\n            container: this.container,\n            showLabel: true\n        });\n\n        // 初始化并加载默认按钮配置\n        this.optBtnGroups.init().catch(err => {\n            console.error('Failed to initialize OptBtnGroups:', err);\n        });\n    }\n\n    /**\n     * 添加一个工具栏按钮组\n     * @param groupId 新组的 ID\n     * @param beforeGroupId (可选) 插入到哪个组之前，不传则追加到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.addGroup(groupId, beforeGroupId);\n            this.optBtnGroups.render(); // 重新渲染以更新 UI\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 添加一个工具栏按钮\n     * @param config 按钮配置对象\n     */\n    public addButton(config: ButtonConfig) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.addButton(config);\n            this.optBtnGroups.render(); // 重新渲染以更新 UI\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置按钮的可见性\n     * @param buttonId 按钮 ID\n     * @param visible 是否可见\n     */\n    public setButtonVisibility(buttonId: string, visible: boolean) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.updateButtonVisibility(buttonId, visible);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置是否显示按钮下方的文字标签\n     * @param show 是否显示\n     */\n    public setShowLabel(show: boolean) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setShowLabel(show);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置整个工具栏的可见性\n     * @param visible 是否可见\n     */\n    public setVisible(visible: boolean) {\n        this.container.style.display = visible ? 'block' : 'none';\n    }\n\n    /**\n     * 设置工具栏背景颜色\n     * @param color CSS 颜色值\n     */\n    public setBackgroundColor(color: string) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setBackgroundColor(color);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 设置工具栏详细颜色配置\n     * @param colors 颜色配置对象\n     */\n    public setColors(colors: ToolbarColors) {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.setColors(colors);\n        } else {\n            console.warn('Toolbar not initialized yet.');\n        }\n    }\n\n    /**\n     * 销毁工具栏管理器\n     */\n    public destroy() {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.destroy();\n            this.optBtnGroups = null;\n        }\n    }\n}\n","import './index.css';\nimport type { DialogOptions } from './index.type';\n\n/**\n * 通用弹窗组件类\n * 支持拖拽、缩放、自定义内容和位置。\n */\nexport class BimDialog {\n    private element: HTMLElement;\n    private options: DialogOptions;\n    private container: HTMLElement;\n    private header: HTMLElement;\n    private contentArea: HTMLElement;\n    private _isDestroyed = false;\n\n    /**\n     * 构造函数\n     * @param options 弹窗配置选项\n     */\n    constructor(options: DialogOptions) {\n        // 合并默认配置\n        this.options = {\n            title: 'Dialog',\n            width: 300,\n            height: 'auto',\n            position: 'center',\n            draggable: true,\n            resizable: false,\n            minWidth: 200,\n            minHeight: 100,\n            ...options\n        };\n        this.container = options.container;\n\n        // 创建 DOM 结构\n        this.element = this.createDom();\n        this.header = this.element.querySelector('.bim-dialog-header') as HTMLElement;\n        this.contentArea = this.element.querySelector('.bim-dialog-content') as HTMLElement;\n\n        // 初始化\n        this.init();\n    }\n\n    /**\n     * 创建弹窗的 DOM 结构\n     */\n    private createDom(): HTMLElement {\n        const el = document.createElement('div');\n        el.className = 'bim-dialog';\n\n        if (this.options.id) el.id = this.options.id;\n        \n        // 应用颜色配置到 CSS 变量 (局部作用域)\n        const style = el.style;\n        if (this.options.backgroundColor) style.setProperty('--bim-dialog-bg', this.options.backgroundColor);\n        if (this.options.headerBackgroundColor) style.setProperty('--bim-dialog-header-bg', this.options.headerBackgroundColor);\n        if (this.options.titleColor) style.setProperty('--bim-dialog-title-color', this.options.titleColor);\n        if (this.options.textColor) style.setProperty('--bim-dialog-text-color', this.options.textColor);\n        if (this.options.borderColor) style.setProperty('--bim-dialog-border-color', this.options.borderColor);\n\n        // 设置初始尺寸\n        this.setSize(el, this.options.width, this.options.height);\n\n        // 创建标题栏 (Header)\n        const header = document.createElement('div');\n        header.className = 'bim-dialog-header';\n        if (this.options.draggable) header.classList.add('draggable');\n\n        const title = document.createElement('span');\n        title.className = 'bim-dialog-title';\n        title.textContent = this.options.title || '';\n\n        const closeBtn = document.createElement('span');\n        closeBtn.className = 'bim-dialog-close';\n        closeBtn.innerHTML = '&times;';\n        closeBtn.onclick = () => this.close();\n\n        header.appendChild(title);\n        header.appendChild(closeBtn);\n\n        // 创建内容区域 (Content)\n        const content = document.createElement('div');\n        content.className = 'bim-dialog-content';\n        if (typeof this.options.content === 'string') {\n            content.innerHTML = this.options.content;\n        } else if (this.options.content instanceof HTMLElement) {\n            content.appendChild(this.options.content);\n        }\n\n        el.appendChild(header);\n        el.appendChild(content);\n\n        // 如果允许缩放，创建缩放手柄\n        if (this.options.resizable) {\n            const resizeHandle = document.createElement('div');\n            resizeHandle.className = 'bim-dialog-resize-handle';\n            el.appendChild(resizeHandle);\n        }\n\n        return el;\n    }\n\n    /**\n     * 设置元素尺寸\n     */\n    private setSize(el: HTMLElement, width?: number | string, height?: number | string) {\n        if (width !== undefined) {\n            el.style.width = typeof width === 'number' ? `${width}px` : width;\n        }\n        if (height !== undefined) {\n            el.style.height = typeof height === 'number' ? `${height}px` : height;\n        }\n    }\n\n    /**\n     * 初始化组件功能\n     */\n    private init() {\n        this.container.appendChild(this.element);\n\n        // 必须先挂载才能计算尺寸进行定位\n        this.initPosition();\n\n        if (this.options.draggable) {\n            this.initDrag();\n        }\n\n        if (this.options.resizable) {\n            this.initResize();\n        }\n    }\n\n    /**\n     * 初始化弹窗位置\n     */\n    private initPosition() {\n        const pos = this.options.position;\n\n        const elRect = this.element.getBoundingClientRect();\n        \n        // 计算相对父容器的定位\n        let left = 0;\n        let top = 0;\n\n        const pW = this.container.clientWidth;\n        const pH = this.container.clientHeight;\n        const elW = elRect.width;\n        const elH = elRect.height;\n\n        if (typeof pos === 'object' && 'x' in pos) {\n            left = pos.x;\n            top = pos.y;\n        } else {\n            switch (pos) {\n                case 'center':\n                    left = (pW - elW) / 2;\n                    top = (pH - elH) / 2;\n                    break;\n                case 'top-left': left = 0; top = 0; break;\n                case 'top-center': left = (pW - elW) / 2; top = 0; break;\n                case 'top-right': left = pW - elW; top = 0; break;\n                case 'left-center': left = 0; top = (pH - elH) / 2; break;\n                case 'right-center': left = pW - elW; top = (pH - elH) / 2; break;\n                case 'bottom-left': left = 0; top = pH - elH; break;\n                case 'bottom-center': left = (pW - elW) / 2; top = pH - elH; break;\n                case 'bottom-right': left = pW - elW; top = pH - elH; break;\n                default:\n                    left = (pW - elW) / 2;\n                    top = (pH - elH) / 2;\n            }\n        }\n\n        // 简单的边界检查，防止初始位置溢出\n        left = Math.max(0, Math.min(left, pW - elW));\n        top = Math.max(0, Math.min(top, pH - elH));\n\n        this.element.style.left = `${left}px`;\n        this.element.style.top = `${top}px`;\n    }\n\n    /**\n     * 初始化拖拽功能\n     */\n    private initDrag() {\n        let startX = 0;\n        let startY = 0;\n        let startLeft = 0;\n        let startTop = 0;\n\n        const onMouseDown = (e: MouseEvent) => {\n            e.preventDefault();\n            startX = e.clientX;\n            startY = e.clientY;\n            startLeft = this.element.offsetLeft;\n            startTop = this.element.offsetTop;\n\n            document.addEventListener('mousemove', onMouseMove);\n            document.addEventListener('mouseup', onMouseUp);\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            const dx = e.clientX - startX;\n            const dy = e.clientY - startY;\n\n            let newLeft = startLeft + dx;\n            let newTop = startTop + dy;\n\n            // 边界限制，防止拖出容器\n            const maxLeft = this.container.clientWidth - this.element.offsetWidth;\n            const maxTop = this.container.clientHeight - this.element.offsetHeight;\n\n            newLeft = Math.max(0, Math.min(newLeft, maxLeft));\n            newTop = Math.max(0, Math.min(newTop, maxTop));\n\n            this.element.style.left = `${newLeft}px`;\n            this.element.style.top = `${newTop}px`;\n        };\n\n        const onMouseUp = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        };\n\n        this.header.addEventListener('mousedown', onMouseDown);\n    }\n\n    /**\n     * 初始化缩放功能\n     */\n    private initResize() {\n        const handle = this.element.querySelector('.bim-dialog-resize-handle') as HTMLElement;\n        if (!handle) return;\n\n        let startX = 0;\n        let startY = 0;\n        let startW = 0;\n        let startH = 0;\n\n        const onMouseDown = (e: MouseEvent) => {\n            e.preventDefault();\n            e.stopPropagation();\n            startX = e.clientX;\n            startY = e.clientY;\n            startW = this.element.offsetWidth;\n            startH = this.element.offsetHeight;\n\n            document.addEventListener('mousemove', onMouseMove);\n            document.addEventListener('mouseup', onMouseUp);\n        };\n\n        const onMouseMove = (e: MouseEvent) => {\n            const dx = e.clientX - startX;\n            const dy = e.clientY - startY;\n\n            const newW = Math.max(this.options.minWidth || 100, startW + dx);\n            const newH = Math.max(this.options.minHeight || 50, startH + dy);\n\n            this.element.style.width = `${newW}px`;\n            this.element.style.height = `${newH}px`;\n        };\n\n        const onMouseUp = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        };\n\n        handle.addEventListener('mousedown', onMouseDown);\n    }\n\n    /**\n     * 动态设置内容\n     * @param content 内容元素或 HTML 字符串\n     */\n    public setContent(content: HTMLElement | string) {\n        this.contentArea.innerHTML = '';\n        if (typeof content === 'string') {\n            this.contentArea.innerHTML = content;\n        } else {\n            this.contentArea.appendChild(content);\n        }\n    }\n\n    /**\n     * 关闭弹窗并销毁\n     */\n    public close() {\n        if (this._isDestroyed) return;\n        this.element.remove();\n        this._isDestroyed = true;\n        if (this.options.onClose) {\n            this.options.onClose();\n        }\n    }\n}\n","import './index.css';\nimport { BimDialog } from '../index';\n\n/**\n * BimInfoDialog (二次封装示例)\n * 这是一个展示项目信息的业务弹窗组件，内部封装了 BimDialog。\n */\nexport class BimInfoDialog {\n    private dialog: BimDialog;\n\n    /**\n     * 构造函数\n     * @param container 父容器\n     */\n    constructor(container: HTMLElement) {\n        // 创建自定义的 DOM 内容\n        const contentEl = document.createElement('div');\n        contentEl.className = 'bim-info-dialog-content';\n\n        const infoTitle = document.createElement('h3');\n        infoTitle.textContent = 'Model Information';\n\n        const infoList = document.createElement('ul');\n        infoList.innerHTML = `\n            <li><strong>Name:</strong> Sample Project</li>\n            <li><strong>Version:</strong> 1.0.0</li>\n            <li><strong>Date:</strong> ${new Date().toLocaleDateString()}</li>\n            <li><strong>Status:</strong> <span style=\"color: green;\">Active</span></li>\n        `;\n\n        const actionBtn = document.createElement('button');\n        actionBtn.textContent = 'Update Status';\n        actionBtn.style.marginTop = '10px';\n        actionBtn.onclick = () => {\n            alert('Status updated!');\n        };\n\n        contentEl.appendChild(infoTitle);\n        contentEl.appendChild(infoList);\n        contentEl.appendChild(actionBtn);\n\n        // 初始化 BimDialog，直接传入构建好的 HTMLElement\n        this.dialog = new BimDialog({\n            container: container,\n            title: 'Project Info (Wrapped)',\n            content: contentEl, \n            width: 320,\n            height: 'auto',\n            position: 'center',\n            resizable: true,\n            draggable: true\n        });\n    }\n\n    /**\n     * 关闭弹窗\n     */\n    public close() {\n        this.dialog.close();\n    }\n}","import { BimDialog } from '../dialog';\nimport { BimInfoDialog } from '../dialog/bimInfoDialog';\nimport type { DialogOptions } from '../dialog/index.type';\n\n/**\n * 弹窗管理器\n * 负责创建和管理应用中的各类弹窗。\n */\nexport class DialogManager {\n    /** 弹窗挂载的父容器 */\n    private container: HTMLElement;\n\n    /**\n     * 构造函数\n     * @param container 弹窗挂载的目标容器\n     */\n    constructor(container: HTMLElement) {\n        this.container = container;\n    }\n\n    /**\n     * 创建一个通用弹窗\n     * @param options 弹窗配置选项（不需要传 container，自动使用管理器绑定的容器）\n     * @returns BimDialog 实例\n     */\n    public create(options: Omit<DialogOptions, 'container'>): BimDialog {\n        return new BimDialog({\n            container: this.container,\n            ...options\n        });\n    }\n\n    /**\n     * 显示二次封装的模型信息弹窗\n     * 演示如何调用特定的业务弹窗组件\n     */\n    public showInfoDialog() {\n        new BimInfoDialog(this.container);\n    }\n}","import './bim-engine.css';\nimport { ToolbarManager } from './modules/toolbar-manager';\nimport { DialogManager } from './modules/dialog-manager';\n\n/**\n * BimEngine 主类\n * 负责初始化整个应用界面，协调各个子模块（如工具栏、弹窗等）。\n */\nexport class BimEngine {\n    /** 主容器元素 */\n    private container: HTMLElement;\n    /** 内部包装器元素，用于承载所有 UI 组件 */\n    private wrapper: HTMLElement | null = null;\n    \n    /** 工具栏管理器实例 */\n    public toolbar: ToolbarManager | null = null;\n    /** 弹窗管理器实例 */\n    public dialog: DialogManager | null = null;\n\n    /**\n     * 构造函数\n     * @param container 容器元素或容器 ID\n     */\n    constructor(container: HTMLElement | string) {\n        const el = typeof container === 'string' ? document.getElementById(container) : container;\n        if (!el) throw new Error('Container not found');\n        this.container = el;\n        this.init();\n    }\n\n    /**\n     * 初始化方法\n     * 创建 DOM 结构并初始化各子模块\n     */\n    private init() {\n        // 1. 清空容器可能存在的旧内容\n        this.container.innerHTML = '';\n\n        // 2. 创建外层容器 div\n        this.wrapper = document.createElement('div');\n        this.wrapper.className = 'bim-engine-wrapper';\n\n        // 3. 创建标题 h1\n        const title = document.createElement('h1');\n        title.textContent = 'BimEngine';\n        title.className = 'bim-engine-title';\n\n        // 4. 创建描述段落 p\n        const desc = document.createElement('p');\n        desc.textContent = '这是一个使用BIM-ENGINE。';\n        desc.className = 'bim-engine-desc';\n\n        // 6. 创建操作按钮组容器\n        const btnGroupContainer = document.createElement('div');\n        btnGroupContainer.id = 'opt-btn-groups';\n        btnGroupContainer.className = 'bim-engine-opt-btn-container';\n\n        // 7. 组装元素\n        this.wrapper.appendChild(title);\n        this.wrapper.appendChild(desc);\n        \n        // 初始化管理器\n        this.dialog = new DialogManager(this.wrapper);\n        this.toolbar = new ToolbarManager(btnGroupContainer);\n\n        // 5. 测试按钮（更新为使用管理器）\n        // 5.1 创建普通测试弹窗按钮\n        const dialogBtn = document.createElement('button');\n        dialogBtn.textContent = '打开测试弹窗';\n        dialogBtn.className = 'bim-engine-btn';\n        dialogBtn.onclick = () => {\n            this.dialog?.create({\n                title: '测试弹窗',\n                content: '<div style=\"padding: 10px;\">这是一个 <b>可拖拽</b> 且 <b>可缩放</b> 的弹窗。<br><br>你可以尝试拖动标题栏，或者拖动右下角改变大小。</div>',\n                width: 300,\n                height: 400,\n                position: 'top-left',\n                draggable: true,\n                resizable: true\n            });\n        };\n\n        // 5.2 创建二次封装信息弹窗按钮\n        const infoDialogBtn = document.createElement('button');\n        infoDialogBtn.textContent = '打开信息弹窗 (封装版)';\n        infoDialogBtn.className = 'bim-engine-btn';\n        infoDialogBtn.style.marginLeft = '10px';\n        infoDialogBtn.onclick = () => {\n            this.dialog?.showInfoDialog();\n        };\n\n        // 将按钮和工具栏容器添加到包装器中\n        this.wrapper.appendChild(dialogBtn);\n        this.wrapper.appendChild(infoDialogBtn);\n        this.wrapper.appendChild(btnGroupContainer);\n\n        // 8. 将包装器挂载到主容器\n        this.container.appendChild(this.wrapper);\n    }\n\n    /**\n     * 销毁实例\n     * 清理所有资源和 DOM 元素\n     */\n    public destroy() {\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = null;\n        }\n        this.dialog = null;\n        this.container.innerHTML = '';\n    }\n}"],"names":["OptBtnGroups","options","el","style","colors","groupId","beforeGroupId","g","newGroup","index","config","parentId","group","button","parentBtn","buttons","id","btn","found","homeButton","locationButton","walkMenuButton","walkPersonButton","walkBirdButton","settingButton","infoButton","wrapper","groupElement","total","groupEl","btnWrapper","btnEl","icon","label","arrow","dropdown","rect","centerX","subBtn","item","e","buttonId","visible","show","color","ToolbarManager","container","err","BimDialog","header","title","closeBtn","content","resizeHandle","width","height","pos","elRect","left","top","pW","pH","elW","elH","startX","startY","startLeft","startTop","onMouseDown","onMouseMove","onMouseUp","dx","dy","newLeft","newTop","maxLeft","maxTop","handle","startW","startH","newW","newH","BimInfoDialog","contentEl","infoTitle","infoList","actionBtn","DialogManager","BimEngine","desc","btnGroupContainer","dialogBtn","infoDialogBtn"],"mappings":"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"}