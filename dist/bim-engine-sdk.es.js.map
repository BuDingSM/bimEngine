{"version":3,"file":"bim-engine-sdk.es.js","sources":["../src/toolbar/index.ts","../src/bim-engine.ts"],"sourcesContent":["import './index.css';\nimport type {\n    OptButton,\n    ButtonGroup,\n    OptBtnGroupsOptions,\n    ButtonConfig\n} from './index.type';\n\nexport class OptBtnGroups {\n    private container: HTMLElement;\n    private options: OptBtnGroupsOptions;\n    // 改用 Array 存储 Group，方便控制顺序\n    private groups: ButtonGroup[] = [];\n    private activeBtnIds: Set<string> = new Set();\n    private btnRefs: Map<string, HTMLElement> = new Map();\n    private dropdownElement: HTMLElement | null = null;\n    private hoverTimeout: number | null = null;\n\n    private readonly DEFAULT_ICON = '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect></svg>';\n\n    constructor(options: OptBtnGroupsOptions) {\n        const el = typeof options.container === 'string'\n            ? document.getElementById(options.container)\n            : options.container;\n\n        if (!el) throw new Error('Container not found');\n\n        this.container = el;\n        this.options = {\n            showLabel: true,\n            visibility: {},\n            ...options\n        };\n\n        this.initContainer();\n    }\n\n    private initContainer(): void {\n        this.container.innerHTML = '';\n    }\n\n    /**\n     * 添加按钮组\n     * @param groupId 组ID\n     * @param beforeGroupId 在哪个组之前插入（可选），不传则插入到最后\n     */\n    public addGroup(groupId: string, beforeGroupId?: string): void {\n        if (this.groups.some(g => g.id === groupId)) {\n            console.warn('Group ' + groupId + ' already exists');\n            return;\n        }\n\n        const newGroup: ButtonGroup = { id: groupId, buttons: [] };\n\n        if (beforeGroupId) {\n            const index = this.groups.findIndex(g => g.id === beforeGroupId);\n            if (index !== -1) {\n                this.groups.splice(index, 0, newGroup);\n            } else {\n                console.warn(`Target group ${beforeGroupId} not found, appending ${groupId} to end.`);\n                this.groups.push(newGroup);\n            }\n        } else {\n            this.groups.push(newGroup);\n        }\n    }\n\n    /**\n     * 添加按钮\n     * @param config 按钮配置（必须包含 groupId，可选包含 parentId）\n     */\n    public addButton(config: ButtonConfig): void {\n        const { groupId, parentId } = config;\n\n        if (!groupId) {\n            throw new Error(`Button ${config.id} config must contain 'groupId'`);\n        }\n\n        const group = this.groups.find(g => g.id === groupId);\n        if (!group) {\n            throw new Error(`Group ${groupId} not found. Please call addGroup first.`);\n        }\n\n        const button: OptButton = {\n            ...config,\n            children: config.children || []\n        };\n\n        if (parentId) {\n            // Add as sub-button\n            const parentBtn = this.findButton(group.buttons, parentId);\n            if (!parentBtn) {\n                throw new Error(`Parent button ${parentId} not found in group ${groupId}`);\n            }\n            if (!parentBtn.children) {\n                parentBtn.children = [];\n            }\n            parentBtn.children.push(button);\n        } else {\n            // Add as main button\n            group.buttons.push(button);\n        }\n    }\n\n    private findButton(buttons: OptButton[], id: string): OptButton | undefined {\n        for (const btn of buttons) {\n            if (btn.id === id) return btn;\n            if (btn.children) {\n                const found = this.findButton(btn.children, id);\n                if (found) return found;\n            }\n        }\n        return undefined;\n    }\n\n    public async init(): Promise<void> {\n        const { homeButton } = await import('./buttons/home');\n        const { locationButton } = await import('./buttons/location');\n        const { walkMenuButton } = await import('./buttons/walk/walk-menu');\n        const { walkPersonButton } = await import('./buttons/walk/walk-person');\n        const { walkBirdButton } = await import('./buttons/walk/walk-bird');\n        const { settingButton } = await import('./buttons/setting');\n        const { infoButton } = await import('./buttons/info');\n\n        // 添加组1\n        this.addGroup('group-1');\n        this.addButton(homeButton);\n        this.addButton(walkMenuButton);\n        this.addButton(walkPersonButton);\n        this.addButton(walkBirdButton);\n        this.addButton(locationButton);\n        this.addGroup('group-2');\n        this.addButton(settingButton);\n        this.addButton(infoButton);\n        this.render();\n    }\n\n    public render(): void {\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'toolbar-container';\n\n        // 直接遍历数组，顺序由 addGroup 控制\n        this.groups.forEach((group, index) => {\n            const groupElement = this.renderGroup(group, index, this.groups.length);\n            wrapper.appendChild(groupElement);\n        });\n\n        this.container.appendChild(wrapper);\n    }\n\n    private renderGroup(group: ButtonGroup, index: number, total: number): HTMLElement {\n        const groupEl = document.createElement('div');\n        groupEl.className = 'opt-btn-group';\n\n        if (index < total - 1) {\n            groupEl.classList.add('has-divider');\n        }\n\n        group.buttons.forEach(button => {\n            if (this.isVisible(button.id)) {\n                const btnWrapper = this.renderButton(button);\n                groupEl.appendChild(btnWrapper);\n            }\n        });\n\n        return groupEl;\n    }\n\n    private renderButton(button: OptButton): HTMLElement {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'opt-btn-wrapper';\n\n        const btnEl = document.createElement('div');\n        btnEl.className = 'opt-btn';\n\n        if (this.activeBtnIds.has(button.id)) {\n            btnEl.classList.add('active');\n        }\n\n        if (button.disabled) {\n            btnEl.classList.add('disabled');\n        }\n\n        if (!this.options.showLabel) {\n            btnEl.classList.add('no-label');\n            if (button.label) {\n                btnEl.title = button.label;\n            }\n        }\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon';\n        icon.innerHTML = this.getIcon(button.icon);\n        btnEl.appendChild(icon);\n\n        if (this.options.showLabel && button.label) {\n            const label = document.createElement('span');\n            label.className = 'opt-btn-label';\n            label.textContent = button.label;\n            btnEl.appendChild(label);\n        }\n\n        if (button.children && button.children.length > 0) {\n            const arrow = document.createElement('span');\n            arrow.className = 'opt-btn-arrow';\n            arrow.textContent = '▼';\n            btnEl.appendChild(arrow);\n        }\n\n        btnEl.addEventListener('click', () => this.handleClick(button));\n        btnEl.addEventListener('mouseenter', () => this.handleMouseEnter(button, btnEl));\n        btnEl.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        this.btnRefs.set(button.id, btnEl);\n\n        wrapper.appendChild(btnEl);\n        return wrapper;\n    }\n\n    private handleClick(button: OptButton): void {\n        if (button.disabled) return;\n\n        if (!button.children || button.children.length === 0) {\n            if (button.keepActive) {\n                const wasActive = this.activeBtnIds.has(button.id);\n                if (wasActive) {\n                    this.activeBtnIds.delete(button.id);\n                } else {\n                    this.activeBtnIds.add(button.id);\n                }\n                this.updateButtonState(button.id);\n            }\n\n            this.closeDropdown();\n\n            if (button.onClick) {\n                button.onClick(button);\n            }\n        }\n    }\n\n    private handleSubClick(button: OptButton): void {\n        if (button.keepActive) {\n            const wasActive = this.activeBtnIds.has(button.id);\n            if (wasActive) {\n                this.activeBtnIds.delete(button.id);\n            } else {\n                this.activeBtnIds.add(button.id);\n            }\n            this.updateButtonState(button.id);\n        }\n\n        this.closeDropdown();\n\n        if (button.onClick) {\n            button.onClick(button);\n        }\n    }\n\n    private handleMouseEnter(button: OptButton, btnEl: HTMLElement): void {\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n            this.hoverTimeout = null;\n        }\n\n        if (button.children && button.children.length > 0) {\n            this.showDropdown(button, btnEl);\n\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.add('rotated');\n            }\n        } else {\n            this.closeDropdown();\n        }\n    }\n\n    private handleMouseLeave(): void {\n        this.hoverTimeout = window.setTimeout(() => {\n            this.closeDropdown();\n        }, 200);\n    }\n\n    private showDropdown(button: OptButton, btnEl: HTMLElement): void {\n        this.closeDropdown();\n\n        if (!button.children) return;\n\n        const dropdown = document.createElement('div');\n        dropdown.className = 'opt-btn-dropdown';\n\n        const rect = btnEl.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n\n        dropdown.style.top = rect.top - 8 + 'px';\n        dropdown.style.left = centerX + 'px';\n\n        button.children.forEach(subBtn => {\n            if (this.isVisible(subBtn.id)) {\n                const item = this.renderDropdownItem(subBtn);\n                dropdown.appendChild(item);\n            }\n        });\n\n        dropdown.addEventListener('mouseenter', () => {\n            if (this.hoverTimeout) {\n                clearTimeout(this.hoverTimeout);\n                this.hoverTimeout = null;\n            }\n        });\n\n        dropdown.addEventListener('mouseleave', () => this.handleMouseLeave());\n\n        document.body.appendChild(dropdown);\n        this.dropdownElement = dropdown;\n    }\n\n    private renderDropdownItem(button: OptButton): HTMLElement {\n        const item = document.createElement('div');\n        item.className = 'opt-btn-dropdown-item';\n\n        const icon = document.createElement('div');\n        icon.className = 'opt-btn-icon small';\n        icon.innerHTML = this.getIcon(button.icon);\n        item.appendChild(icon);\n\n        if (this.options.showLabel) {\n            const label = document.createElement('span');\n            label.textContent = button.label;\n            item.appendChild(label);\n        }\n\n        item.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.handleSubClick(button);\n        });\n\n        return item;\n    }\n\n    private closeDropdown(): void {\n        if (this.dropdownElement) {\n            this.dropdownElement.remove();\n            this.dropdownElement = null;\n        }\n\n        this.btnRefs.forEach(btnEl => {\n            const arrow = btnEl.querySelector('.opt-btn-arrow');\n            if (arrow) {\n                arrow.classList.remove('rotated');\n            }\n        });\n    }\n\n    private updateButtonState(buttonId: string): void {\n        const btnEl = this.btnRefs.get(buttonId);\n        if (btnEl) {\n            if (this.activeBtnIds.has(buttonId)) {\n                btnEl.classList.add('active');\n            } else {\n                btnEl.classList.remove('active');\n            }\n        }\n    }\n\n    private getIcon(icon?: string): string {\n        return icon || this.DEFAULT_ICON;\n    }\n\n    private isVisible(id: string): boolean {\n        return this.options.visibility?.[id] !== false;\n    }\n\n    public destroy(): void {\n        this.closeDropdown();\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n        this.container.innerHTML = '';\n        this.btnRefs.clear();\n        this.activeBtnIds.clear();\n        this.groups = []; // 清空数组\n    }\n}","import './bim-engine.css';\nimport { OptBtnGroups } from './toolbar';\n\nexport class BimEngine {\n    private container: HTMLElement;\n    private optBtnGroups: OptBtnGroups | null = null;\n\n    constructor(container: HTMLElement | string) {\n        const el = typeof container === 'string' ? document.getElementById(container) : container;\n        if (!el) throw new Error('Container not found');\n        this.container = el;\n        this.init();\n    }\n\n    private init() {\n        // 1. 清空容器可能存在的旧内容\n        this.container.innerHTML = '';\n\n        // 2. 创建外层容器 div\n        const wrapper = document.createElement('div');\n        wrapper.className = 'bim-engine-wrapper';\n\n        // 3. 创建标题 h1\n        const title = document.createElement('h1');\n        title.textContent = 'BimEngine';\n        title.className = 'bim-engine-title';\n\n        // 4. 创建段落 p\n        const desc = document.createElement('p');\n        desc.textContent = '这是一个使用BIM-ENGINE。';\n        desc.className = 'bim-engine-desc';\n\n        // 6. 创建操作按钮组容器\n        const btnGroupContainer = document.createElement('div');\n        btnGroupContainer.id = 'opt-btn-groups';\n        btnGroupContainer.className = 'bim-engine-opt-btn-container';\n\n        // 7. 组装元素\n        wrapper.appendChild(title);\n        wrapper.appendChild(desc);\n        wrapper.appendChild(btnGroupContainer); // 将按钮组放入 wrapper 中\n\n        // 8. 挂载到主容器\n        this.container.appendChild(wrapper);\n\n        // 9. 初始化操作按钮组\n        this.initOptBtnGroups(btnGroupContainer);\n    }\n\n    private initOptBtnGroups(container: HTMLElement) {\n        this.optBtnGroups = new OptBtnGroups({\n            container,\n            showLabel: true\n        });\n\n        // 初始化并加载默认按钮\n        this.optBtnGroups.init().catch(err => {\n            console.error('Failed to initialize OptBtnGroups:', err);\n        });\n    }\n\n    public destroy() {\n        if (this.optBtnGroups) {\n            this.optBtnGroups.destroy();\n            this.optBtnGroups = null;\n        }\n        this.container.innerHTML = '';\n    }\n}"],"names":["OptBtnGroups","options","el","groupId","beforeGroupId","g","newGroup","index","config","parentId","group","button","parentBtn","buttons","id","btn","found","homeButton","locationButton","walkMenuButton","walkPersonButton","walkBirdButton","settingButton","infoButton","wrapper","groupElement","total","groupEl","btnWrapper","btnEl","icon","label","arrow","dropdown","rect","centerX","subBtn","item","e","buttonId","BimEngine","container","title","desc","btnGroupContainer","err"],"mappings":"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"}